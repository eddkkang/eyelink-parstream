<?xml version="1.0"?>
<queryList>
  <test>
    <query id='test01'><![CDATA[
      {q : 'aaa'}
     ]]></query>
    <query id='test02'><![CDATA[
      {q : 'bbb'}
     ]]></query>
  </test>
  <dashboard>
    <query id='selectSuccessCount'><![CDATA[
    {
      index: 'corecode-2017-05',
      type: 'corecode',
      body: {
        query: {
          match: {
            node_id : '0001.00000001'
          }
        }
      }
    }
     ]]></query>
    <query id='selectQueryInParams'><![CDATA[
    {
      index: 'corecode-2017-05',
      type: 'corecode',
      body: {
        query: {
          match: {
            node_id : '#NODE_ID#'
          }
        }
      }
    }
     ]]></query>
      <!-- select b.zone_id, a.node_id, event_time, event_type, active_power, ampere, voltage,  power_factor,
         reactive_power, apparent_power, amount_active_power,
         als_level, dimming_level,
           noise_decibel, noise_frequency,
           b.gps_latitude, b.gps_longitude, b.gps_altitude,
           vibration_x, vibration_y, vibration_z,
           (vibration_x + vibration_y + vibration_z) / 3 as vibration
      from tb_node_raw as a left outer join tb_node_info as b on a.node_id = b.node_id
    where event_time >= timestamp #START_TIMESTAMP#
      and event_time < timestamp #END_TIMESTAMP#
    order by event_time -->    
    <query id='selectEventRawDataOld'><![CDATA[
    {
      index: 'corecode-2017-05',
      type: 'corecode',
      body: {
        query: {
          match: {
            node_id : '#NODE_ID#'
          }
        }
      }
    }
    ]]></query>
    <query id='selectEventRawData'><![CDATA[
    {
      "index": "corecode-2017-05",
      "type": "corecode",
      "body": {
        "size" : -1,
        "_source" : ["node_id", "event_time", "event_type"],
        "query": {
          "bool": {
            "filter" : {
              "range" : {
                "event_time" : {
                  "gte" : "2016-11-21",
                  "lte" : "2016-11-22"
                }
              }
            }
          }
        }
      }
    }
    ]]></query>
  </dashboard>
  <reports>    
  </reports>
  <!--
  <analysis>
     <query id='selectDaClusterMasterAll'><![CDATA[
        {
          "index" : "",
          "type" : "",
          "body" : {
            "size" : -1,
            "_source" : ["da_date", "start_date", "end_date", "time_interval"],
            "query" : {
              "bool" : {
                "filter" : {
                  "range" : {
                    "da_date" : {
                      "gte" : '#START_TIMESTAMP#',
                      "lte" : '#END_TIMESTAMP#'
                    }
                  }
                }
              }
            }
          }
        }
     ]]></query>
     <query id='selectDaClusterDetailAll'><![CDATA[
        {
          "index" : "",
          "type" : "",
          "body" : {
            "size" : -1,            
            "sort" : [ 
              { "event_time" : "asc" }
            ],
            "query" : { "match_all" : { }     },
            "bool" : {
                "filter" : {
                  "range" : {
                    "da_date" : {
                      "gte" : '#START_TIMESTAMP#',
                      "lte" : '#END_TIMESTAMP#'
                    }
                  }
                }
              }
             }
          }
     ]]></query>
     <query id='selectDaClusterMaster'><![CDATA[
        {
          "index" : "",
          "type" : "",
          "body" : {
            "size" : -1,            
            "sort" : [ 
              { "da_date" : "desc" }
            ],
            "query" : { "match_all" : { }
                }
             }
          } 
     ]]></query>
     <query id='selectDaClusterMasterByDadate'><![CDATA[
      select * from tb_da_clustering_master
        where da_date = #DADATE#
     ]]></query>
  </analysis>-->
  <sample>
    <query id='selectJiraAccess'><![CDATA[
      {
        "index" : "filebeat_jira_access-2017.06.01",
        "type" : "access",                    
        "body" : {       
          "size"   : 9999, 
          "sort" : { "@timestamp" : { "order" : "asc" }},
          "query" : { "match_all" : { }
              }
           }
        } 
  ]]></query>
  <query id='selectJiraAccReq'><![CDATA[
      {
        "index" : "filebeat_jira_access-2017.06.01",
        "type" : "access",       
        "body" : {
          "size"   : 350,
          "sort" : { "@timestamp" : { "order" : "asc" }},
          "_source" : ["request", "clientip", "auth"],
          "query" : { "match_all" : { } }
        }
      } 
  ]]></query>
  <query id='selectJiraAccScatter'><![CDATA[
      {
        "index" : "filebeat_jira_access-2017.06.01",
        "type" : "access",                    
        "body" : {       
          "size"   : 9999, 
          "sort" : { "@timestamp" : { "order" : "asc" }},
          "_source" : ["timestamp", "response", "responsetime"],
          "query" : { "match_all" : { }    }
           }
        } 
  ]]></query>  
  <query id='selectScatterSection'><![CDATA[
      {
        "index" : "filebeat_jira_access-2017.06.01",
        "type" : "access",                    
        "body" : {       
          "size"   : 9999, 
          "sort" : { "@timestamp" : { "order" : "asc" }},
          "_source" : ["timestamp", "response", "responsetime", "request", "clientip", "host"],
          "query" : { 
            "bool" : {
              "must" : [      { "match_all": {} }        ],
              "filter" : [
                {
                  "bool" : {
                    "should" : [
                      { "range" : 
                        { "responsetime" : 
                          { "gte" : #MIN#,
                            "lt" : #MAX#  } 
                        }
                      },
                      { "range" : 
                        { "timestamp" :
                          { "gte" : #START#,
                            "lt" : #END# }
                        }
                      }
                    ]
                  }                    
                }              
              ]
            }
          }
        } 
      }
  ]]></query>  
</sample>
"index" : "corecode-2017-05",
        "type" : "corecode",              
        "body" : {       
          "size" : 9999, 
          "sort" : { "event_time" : { "order" : "asc" }},
          "_source" : ["node_id", "event_time", "ampere", "voltage", "active_power", "power_factor", "event_type"],
          "query" : { 
            "bool" : {
              "must" : [      { "match_all": {} }        ],
               "filter" : [
                { "term" : { "event_type": "1" } },
                {"range" : { "event_time" :
                  { "gte" : "2016-12-29T16:15:41.000Z",
                      "lt" : "2016-12-30T16:15:41.000Z" }
                    }
                  } 
                ]
              }
            }
          }
<analysis>
  <query id='selectDaClusterMasterAll'><![CDATA[
       {
        "index" : "corecode-2017-05",
        "type" : "corecode",                    
        "body" : {       
          "size"   : 9999,           
          "query" : { "match_all" : { }    }
        } 
     ]]></query>
    <query id='selectDaClusterDetailAll'><![CDATA[
       {
        "index" : "corecode-2017-05",
        "type" : "corecode",                    
        "body" : {       
          "size"   : 9999,           
          "query" : { "match_all" : { }    }
        } 
     ]]></query>
    <query id='selectDaClusterMaster'><![CDATA[
      {
        "index" : "corecode-2017-05",
        "type" : "corecode",                    
        "body" : {       
          "size"   : 9999,           
          "query" : { "match_all" : { }    }
        } 
     ]]></query>
    <query id='selectDaClusterMasterByDadate'><![CDATA[      
    ]]></query>
    <query id='selectDaClusterDetail'><![CDATA[
     {
        "index" : "corecode-2017-05",
        "type" : "corecode",                    
        "body" : {       
          "size"   : 9999,           
          "query" : { "match_all" : { }    }
        } 
     ]]></query>     
     <query id='selectClusterNodePower'><![CDATA[
     {
        "index" : "corecode-2017-05",
        "type" : "corecode",              
        "body" : {       
          "size" : 9999, 
          "sort" : { "event_time" : { "order" : "asc" }},
          "_source" : ["node_id", "event_time", "ampere", "voltage", "active_power", "power_factor", "event_type"],
          "query" : { 
            "bool" : {
              "must" : [      { "match_all": {} }        ],
               "filter" : [
                { "term" : { "event_type": "1" } },   
                { "terms" : { "node_id": [##NODE##] } },             
                {"range" : { "event_time" :
                  { "gte" : #START_TIMESTAMP#,
                      "lt" : #END_TIMESTAMP# }
                    }
                  } 
                ]
              }
            }
          }
        } 
     ]]></query>
   <query id='selectClusterNodePowerTest'><![CDATA[
     {
        "index" : "corecode-2017-05",
        "type" : "corecode",              
        "body" : {       
          "size" : 9999, 
          "sort" : { "event_time" : { "order" : "asc" }},
          "_source" : ["node_id", "event_time", "ampere", "voltage", "active_power", "power_factor", "event_type"],
          "query" : { 
            "bool" : {
              "must" : [      { "match_all": {} }        ],
               "filter" : [
                { "term" : { "event_type": "1" } },
                {"range" : { "event_time" :
                  { "gte" : "2016-12-29T16:15:41.000Z",
                      "lt" : "2016-12-30T16:15:41.000Z" }
                    }
                  } 
                ]
              }
            }
          }
        } 
     ]]></query>
<!--  (vibration_x + vibration_y + vibration_z) / 3 as vibration 없음 -->
    <query id='selectClusterRawData'><![CDATA[
     {
        "index" : "corecode-2017-05",
        "type" : "corecode",              
        "body" : {       
        "size" : 9999, 
        "sort" : { "event_time" : { "order" : "asc" }},
        "_source" : ["node_id", "event_time", "event_type", "active_power", 
              "ampere", "amount_active_power", "als_level", "dimming_level", 
              "noise_decibel", "noise_frequency",
              "vibration_x", "vibration_y", "vibration_z"],
        "query" : { 
          "bool" : {
            "must" : [   { "match_all": {} }  ],
            "filter" : [
              { "term" : { "node_id": [##NODE##] }  },
              { "range" : { "event_time" :
                    { "gte" : #START_TIMESTAMP#,
                       "lt" : #END_TIMESTAMP#" } }
              }   
            ]
          }
         }
        }
      } 
    ]]></query>
    <query id= 'insertClusteringDetail'><![CDATA[
      {
        "index" : "corecode-2017-05",
        "type" : "corecode",                    
        "body" : {       
          "size"   : 9999,           
          "query" : { "match_all" : { }    }
        } 
      ]]></query>
    <query id= 'insertClusteringMaster'><![CDATA[
     {
        "index" : "corecode-2017-05",
        "type" : "corecode",                    
        "body" : {       
          "size"   : 9999,           
          "query" : { "match_all" : { }    }
        } 
      ]]></query>  
</analysis>
</queryList>
